{% extends 'base.html' %}

{% block header %}
<h1>Sign up to cook</h1>
<h2>Meal plan: {{ list.meal_plan }}</h2>
{% endblock %}

{% block content %}

{% if hide == 0 %}
<form  action="" method="post" id="newplan">
<li>
    <label for="meal_plan">Meal plans:</label>
    <select id= "meal_plan" name= "meal_plan">
          <option value="" selected="selected">None</option>
      {% for x in mealplans_names %}
          <option value="{{x.meal_plan}}">{{x.meal_plan}}</option>
      {% endfor %}
    </select>
</li>
</form>
{% endif %}



{% if list %}
<div class="days">
    {% for day, day_dict in list.date.items() %}
    <div class="oneday">
        </p>
        <div class="dateheading">{{ day }}</div>
        {% for meal, meal_dict in day_dict.meals.items() %}
        <div class="mealheading">{{ meal }}</div>
        <div class="cooks">
            <div class="cookheading">Cooks: <button type="button" onclick="window.location.href='{{ url_for( 'url_to', date = day, meal = meal, planner_name = list.meal_plan ) }}';">Edit</button></div>
            {% for cook in meal_dict.cooks %}
            {{ cook }}
            {% else %}
            <button type="button">Sign up</button>
            {% endfor %}
        </div>
        </p>
        <div class="dishes">
            <div class="menuheading">Menu: <button type="button">Edit</button></div>
            {% for dish in meal_dict.dishes %}
            <li>
            {{ dish }}
            </li>
            {% else %}
            <button type="button">Add menu</button>
            {% endfor %}
        </div>
        </p>
        {% endfor %}
    </div>
    {% endfor %}
</div>

{% else %}

{% endif %}


<script type='text/javascript'>
$(document).ready(function(){
  $('#meal_plan').change(function(){
    // Call submit() method on <form id='myform'>
    console.log("hola")
    $('#newplan').submit();
  });
});
</script>

{% endblock %}
